<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SHM: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SHM
   </div>
   <div id="projectbrief">Shared-memorybasedHandy-communicationManager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>[English | <a href="docs_jp/md_manual_introduction_jp.html">日本語</a>]</p>
<p>SHM (Shared-memory based Handy-communication Manager) is a library for easy inter-process communication using shared memory. This library is based on a library created by Professor Koichi Ozaki in C for robot development in his laboratory. The original library had a simple API that made it easy for even novice programmers to write inter-process communication. In addition to the know-how cultivated in the original library, this library has been devised so that object-oriented programs can be realized using C++ classes. In addition, to improve the reliability and functionality of communication, ring buffers and conditional variables are incorporated with reference to fuRom and ROS (Robot Operating System) communication.</p>
<p>[1] 入江清. "ROS との相互運用性に配慮した共有メモリによる低遅延プロセス間通信フレームワーク." 第 35 回日本ロボット学会学術講演会予稿集, RSJ2017AC2B2-01 (2017). <a href="https://furo.org/irie/papers/rsj2017_irie.pdf">https://furo.org/irie/papers/rsj2017_irie.pdf</a></p>
<p>[2] Open Robotics, "ROS.org", <a href="http://wiki.ros.org/">http://wiki.ros.org/</a></p>
<h1><a class="anchor" id="autotoc_md2"></a>
API Concepts</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
irlab::shm Namespace</h2>
<p>All SHM classes and functions are placed within the irlab::shm namespace. This is necessary to avoid conflicts with other similar libraries such as ROS. </p><div class="fragment"><div class="line">#include &quot;shm_pub_sub.hpp&quot;</div>
<div class="line">...</div>
<div class="line">irlab::shm::Publisher&lt;int&gt; pub = irlab::shm::Publisher&lt;int&gt;(&quot;test&quot;);</div>
<div class="line">...</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Automatic shared-memory management</h2>
<p>In SHM, classes automatically allocate and release shared memory.</p>
<p>On the other hand, classes that can be used in standard communication for automatic management are limited to those whose exact size can be obtained with the sizeof function. For example, classes that handle variable length data such as Vector are not supported by the standard. However, it is possible to deal with variable-length data by making specializations as appropriate. For example, shm_pub_sub, a communication library based on the publisher/subscriber model, provides <a class="el" href="shm__pub__sub__vector_8hpp_source.html">shm_pub_sub_vector.hpp</a>, which can handle the Vecotor class.</p>
<p>The shared memory API obtains the top address of allocated memory by a void pointer. Since C++ uses safer type conversion, it is not possible to convert the void pointer to an arbitrary type under normal circumstances. Therefore, to utilize memory allocated by the shared memory API, a forced type conversion called reinterpret_cast must be performed. Hiding this dangerous operation is important to avoid creating strange habits in beginning students.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Implement various communication models</h2>
<p>SHM implements various communication models with reference to ROS to ensure reliable communication. Users can use the following communication models as needed.</p>
<h3><a class="anchor" id="autotoc_md6"></a>
Publisher/subscriber model</h3>
<p>The publisher/subscriber model is a model for one process to disseminate information toward multiple processes.</p>
<h3><a class="anchor" id="autotoc_md7"></a>
Server/Client model (simple)</h3>
<p>This model is a simple call-and-response model, called Service in ROS.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Server/Client model (high functionality version)</h3>
<p>Service communication requires the client to wait until the server responds. However, if the process takes a long time, the client may want to monitor the current status or send a cancellation request. To perform such processing, a model called Action is used in ROS. For convenience, we will call such a communication model Action, following ROS. Note that SHM's Action model is not the complete ROS Action model. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Mar 12 2023 08:15:25 for SHM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
